import{B as a}from"./browser-polyfill-6f7fab7c.js";import{u as r,z as l,E as p}from"./user-config-40c2950d.js";const d={}.VITE_PLAUSIBLE_API_HOST||"https://plausible.io";async function h(t,n){await r(`${d}/api/event`,{method:"POST",body:{domain:"chathub.gg",name:t,url:location.href,props:n},mode:"no-cors"})}async function m(){const{source:t}=await r("https://chathub.gg/api/user/source",{credentials:"include"});h("install",{source:t})}async function s(){const t=await a.tabs.query({}),n=a.runtime.getURL("app.html"),e=t.find(u=>{var i;return(i=u.url)==null?void 0:i.startsWith(n)});if(e){await a.tabs.update(e.id,{active:!0});return}const{startupPage:o}=await l(),c=o===p?"":`#/chat/${o}`;await a.tabs.create({url:`app.html${c}`})}a.action.onClicked.addListener(()=>{s()});a.runtime.onInstalled.addListener(t=>{t.reason==="install"&&(s(),m())});a.commands.onCommand.addListener(async t=>{console.debug(`Command: ${t}`),t==="open-app"&&s()});
//# sourceMappingURL=index.ts-f8d90c41.js.map
